{"remainingRequest":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\babel-loader\\lib\\index.js!E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\Works\\qwsain_dev\\qwsain_dev\\src\\components\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\src\\components\\login\\Login.vue","mtime":1663553906000},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\babel.config.js","mtime":1643142792000},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668329581239},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\babel-loader\\lib\\index.js","mtime":1668329605908},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668329581239},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668329613896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6XFxXb3Jrc1xccXdzYWluX2RldlxccXdzYWluX2Rldlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkU6XFxXb3Jrc1xccXdzYWluX2RldlxccXdzYWluX2Rldlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgdXNlVmFsaWRhdGUgZnJvbSAiQHZ1ZWxpZGF0ZS9jb3JlIjsKaW1wb3J0IHsgcmVxdWlyZWQsIGVtYWlsIH0gZnJvbSAiQHZ1ZWxpZGF0ZS92YWxpZGF0b3JzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHt9LAogIG5hbWU6ICJMb2dpbiIsCiAgLy9jb21waXN0aW9uIEFQSQogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIC8vZGF0YQogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICBwYXNzOiAiIiwKICAgICAgZW1haWw6ICIiCiAgICB9KTsgLy92YWxpZGF0aW9ucwoKICAgIHZhciBydWxlcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBlbWFpbDogewogICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkLAogICAgICAgICAgZW1haWw6IGVtYWlsCiAgICAgICAgfSwKICAgICAgICBwYXNzOiB7CiAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKICAgIHZhciB2JCA9IHVzZVZhbGlkYXRlKHJ1bGVzLCBzdGF0ZSk7CiAgICByZXR1cm4gewogICAgICBzdGF0ZTogc3RhdGUsCiAgICAgIHYkOiB2JAogICAgfTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyTm90Rm91bmRFcnI6ICIiLAogICAgICBuYW1lOiAi2LrZitixINmF2LPYrNmEIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnd2UgYXJlIGhlcmUgMicpOwogICAgdmFyIHVzZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlci1pbmZvIik7CgogICAgaWYgKHVzZXIpIHsKICAgICAgdGhpcy51c2VyTmFtZSA9IEpTT04ucGFyc2UodXNlcikudXNlcl9uYW1lOwogICAgICB0aGlzLm5hbWUgPSBKU09OLnBhcnNlKHVzZXIpLm5hbWU7CiAgICB9CgogICAgaWYgKHRoaXMubmFtZSAhPSAi2LrZitixINmF2LPYrNmEIikgewogICAgICB0aGlzLnJlZGlyZWN0VG8oewogICAgICAgIHZhbDogIkhvbWUiCiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsicmVkaXJlY3RUbyJdKSksIHt9LCB7CiAgICB1c2VyTG9naW46IGZ1bmN0aW9uIHVzZXJMb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy52JC4kdmFsaWRhdGUoKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudiQuJGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZvcm0gVmFsaWRhdGVkIFN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRkZGQiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2VyLyIuY29uY2F0KF90aGlzLnN0YXRlLmVtYWlsLCAiLyIpLmNvbmNhdChfdGhpcy5zdGF0ZS5wYXNzKSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvL2xldCByZXN1bHQgPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlci8nKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkZGRkIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuc3RhdHVzKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAyMDAgJiYgcmVzdWx0LmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJsb2dnZWQgaW4gIik7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyLWluZm8iLCBKU09OLnN0cmluZ2lmeShyZXN1bHQuZGF0YVswXSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMucmVkaXJlY3RUbyh7CiAgICAgICAgICAgICAgICAgICAgdmFsOiAiSG9tZSIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiTm8gVXNlciBGb3VuZCIpOwogICAgICAgICAgICAgICAgICBfdGhpcy51c2VyTm90Rm91bmRFcnIgPSAi2KfZhNio2LHZitivINin2YTYp9mE2YPYqtix2YjZhtmKINij2Ygg2YPZhNmF2Kkg2KfZhNmF2LHZiNixINi62YrYsSDYtdit2YrYrSI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRm9ybSB2bGlkYXRpb24gRmFpbGVkIik7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["E:\\Works\\qwsain_dev\\qwsain_dev\\src\\components\\login\\Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n \r\n  <form @click.prevent>\r\n     <h1>تسجيل الدخول</h1>\r\n     <br/>\r\n    <div class=\"row g-3 aling-items-center\">\r\n      <div class=\"col-auto d-block mx-auto\">\r\n        <input\r\n          type=\"email\"\r\n          class=\"form-control\"\r\n          placeholder=\"ادخل البريد الالكتروني\"\r\n          v-model=\"state.email\"\r\n        />\r\n        <span class=\"error-feedback\" v-if=\"v$.email.$error\"> البريد الالكتروني مطلوب</span>\r\n      </div>\r\n    </div>\r\n    <br />\r\n\r\n    <div class=\"row g-3 aling-items-center\">\r\n      <div class=\"col-auto d-block mx-auto\">\r\n        <input\r\n          type=\"password\"\r\n          class=\"form-control\"\r\n          placeholder=\"ادخل كلمة المرور\"\r\n          v-model=\"state.pass\"\r\n        />\r\n        <span class=\"error-feedback\" v-if=\"v$.pass.$error\"> كلمة المرور مطلوبة</span>\r\n      </div>\r\n    </div>\r\n    <br />\r\n    <div class=\"row g-3 aling-items-center\">\r\n      <div class=\"col-auto d-block mx-auto\">\r\n           \r\n        &nbsp;&nbsp;&nbsp;\r\n        &nbsp;&nbsp;&nbsp;\r\n        <button type=\"submit\" @click=\"userLogin()\" class=\"btn btn-info\">\r\n          سجل الدخول\r\n        </button>\r\n        <br/>\r\n        <br/>\r\n\r\n        <button\r\n          type=\"button\"\r\n          @click=\"redirectTo({ val: 'PasswordRest' })\"\r\n            class=\"btn btn-link\"\r\n        >\r\n          اعادة تعيين كلمة المرور\r\n        </button>\r\n        \r\n        <button\r\n          type=\"button\"\r\n          @click=\"redirectTo({ val: 'SignupEmail' })\"\r\n          class=\"btn btn-link\"\r\n        >\r\n          تسجيل مستخدم جديد \r\n        </button>\r\n         \r\n        \r\n         \r\n         <br/>\r\n      </div>\r\n    </div>\r\n    <br />\r\n    <div class=\"row g-3 align-items-center\">\r\n      <div class=\"col-auto d-block mx-auto\">\r\n        {{userNotFoundErr}}\r\n      </div>\r\n     \r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapActions } from \"vuex\";\r\nimport useValidate  from \"@vuelidate/core\";\r\nimport { required, email } from \"@vuelidate/validators\";\r\nimport { reactive, computed } from \"vue\";\r\n \r\n \r\n\r\nexport default {\r\n  components: { \r\n    \r\n    },\r\n  name: \"Login\",\r\n  //compistion API\r\n  setup() {\r\n    //data\r\n    const state = reactive({\r\n      pass: \"\",\r\n      email: \"\",\r\n    });\r\n    //validations\r\n    const rules = computed(() => {\r\n      return {\r\n        email: { required, email },\r\n        pass: { required },\r\n      };\r\n    });\r\n\r\n    const v$ = useValidate(rules, state);\r\n    return {\r\n      state,\r\n      v$,\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      userNotFoundErr:\"\",\r\n      name:\"غير مسجل\"\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    console.log('we are here 2');\r\n    let user = localStorage.getItem(\"user-info\");\r\n     if(user){\r\n             this.userName = JSON.parse(user).user_name;\r\n      this.name = JSON.parse(user).name;\r\n             \r\n        }\r\n\r\n        if(this.name!=\"غير مسجل\")\r\n        {\r\n            this.redirectTo({val:\"Home\"});\r\n        }\r\n  },\r\n  methods: {\r\n    //signUpPage(){\r\n    //  this.$router.push({name:\"Signup\"});\r\n    // }\r\n\r\n    ...mapActions([\"redirectTo\"]),\r\n\r\n    async userLogin() {\r\n      this.v$.$validate();\r\n      if (!this.v$.$error) {\r\n        console.log(\"Form Validated Successfully\");\r\n\r\n        console.log(\"dddd\");\r\n        let result = await axios.get(\r\n          `http://localhost:3000/api/user/${this.state.email}/${this.state.pass}`\r\n        );\r\n        //let result = await axios.get('http://localhost:3000/api/user/');\r\n\r\n         \r\n        console.log(\"dddd\");\r\n        console.log(result.data);\r\n        console.log(result.status);\r\n        if (result.status == 200 && result.data.length > 0) {\r\n          //console.log(\"logged in \");\r\n          localStorage.setItem(\"user-info\", JSON.stringify(result.data[0]));\r\n          this.redirectTo({val:\"Home\"});\r\n        } else {\r\n         // console.log(\"No User Found\");\r\n         this.userNotFoundErr = \"البريد الالكتروني أو كلمة المرور غير صحيح\";\r\n        }\r\n\r\n      } else {\r\n        console.log(\"Form vlidation Failed\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped >\r\n    .error-feedback{\r\n        color:red;\r\n        font-size: 0.95em;\r\n    }\r\n\r\n</style>"],"sourceRoot":""}]}