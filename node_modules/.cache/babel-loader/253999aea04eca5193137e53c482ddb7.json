{"remainingRequest":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\babel-loader\\lib\\index.js!E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\Works\\qwsain_dev\\qwsain_dev\\src\\views\\SignupEmail.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\src\\views\\SignupEmail.vue","mtime":1663553846000},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\babel.config.js","mtime":1643142792000},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668329581239},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\babel-loader\\lib\\index.js","mtime":1668329605908},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668329581239},{"path":"E:\\Works\\qwsain_dev\\qwsain_dev\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668329613896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6XFxXb3Jrc1xccXdzYWluX2RldlxccXdzYWluX2Rldlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHVzZVZhbGlkYXRlIGZyb20gIkB2dWVsaWRhdGUvY29yZSI7CmltcG9ydCB7IHJlcXVpcmVkLCBlbWFpbCB9IGZyb20gIkB2dWVsaWRhdGUvdmFsaWRhdG9ycyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2lnbnVwRW1haWwiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2JDogdXNlVmFsaWRhdGUoKSwKICAgICAgZW1haWw6ICIiLAogICAgICBlbWFpbENvZGU6ICIiLAogICAgICB0aGVFbWFpbENvZGU6ICIiLAogICAgICBzZW50OiBmYWxzZSwKICAgICAgdmVyZmllZDogZmFsc2UsCiAgICAgIGVtYWlsTm90Rm91bmQ6IHRydWUsCiAgICAgIGNvZGVOb3RDb3JyZWN0OiBmYWxzZQogICAgfTsKICB9LAogIHZhbGlkYXRpb25zOiBmdW5jdGlvbiB2YWxpZGF0aW9ucygpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiB7CiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkLAogICAgICAgIGVtYWlsOiBlbWFpbAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VuZEVtYWlsQ29kZTogZnVuY3Rpb24gc2VuZEVtYWlsQ29kZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdCwgX3Jlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRmZCIpOwoKICAgICAgICAgICAgICAgIF90aGlzLnYkLiR2YWxpZGF0ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy52JC4kZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidiIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZvcm0gVmFsaWRhdGVkIFN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRkZGQiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cHM6Ly9teS1hcHAtMi12Zmpubi5vbmRpZ2l0YWxvY2Vhbi5hcHAvYXBpL2NoZWNrRW1haWwvIi5jb25jYXQoX3RoaXMuZW1haWwpKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8vbGV0IHJlc3VsdCA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2VyLycpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRkZGQiKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5zdGF0dXMpOwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdC5zdGF0dXMgPT0gMjAwICYmIHJlc3VsdC5kYXRhLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIk5vIFVzZXIgRm91bmQiKTsKICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsTm90Rm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX3RoaXMuZW1haWxOb3RGb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL215LWFwcC0yLXZmam5uLm9uZGlnaXRhbG9jZWFuLmFwcC9hcGkvc2VuZGVtYWlsY29kZS8iLmNvbmNhdChfdGhpcy5lbWFpbCkpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX3Jlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKF9yZXN1bHQuc3RhdHVzID09IDIwMCAmJiBfcmVzdWx0LmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfcmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfcmVzdWx0LmRhdGFbMF0ub3RwQ29kZSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsQ29kZSA9IF9yZXN1bHQuZGF0YVswXS5vdHBDb2RlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5lbWFpbENvZGUpOwogICAgICAgICAgICAgICAgICBfdGhpcy5zZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjaGVja0VtYWlsQ29kZTogZnVuY3Rpb24gY2hlY2tFbWFpbENvZGUoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJhYSIpOwogICAgICBjb25zb2xlLmxvZygidiIpOwoKICAgICAgaWYgKHRoaXMudGhlRW1haWxDb2RlID09IHRoaXMuZW1haWxDb2RlKSB7CiAgICAgICAgY29uc29sZS5sb2coItin2LPYqtmD2YXZhCDYp9mE2KrYs9is2YrZhCIpOwogICAgICAgIHRoaXMuY29kZU5vdENvcnJlY3QgPSBmYWxzZTsKICAgICAgICB0aGlzLnZlcmZpZWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCLZg9mI2K8g2KfZhNiq2K3ZgtmCINi62YrYsSDYtdit2YrYrSIpOwogICAgICAgIHRoaXMuY29kZU5vdENvcnJlY3QgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["E:\\Works\\qwsain_dev\\qwsain_dev\\src\\views\\SignupEmail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n\r\n  <form @click.prevent>\r\n    <h1>التحقق من البريد الالكتروني</h1>\r\n    <br />\r\n\r\n    <div class=\"row g-3 align-items-center\">\r\n      <div class=\"col-auto d-block mx-auto\">\r\n          <p v-if=\"emailNotFound==false\" style=\"color:red\"> البريد الالكتروني موجود بالفعل  </p>\r\n         \r\n      </div>\r\n     \r\n    </div>\r\n\r\n    <br />\r\n\r\n    <div v-if=\"sent == false\">\r\n      <div class=\"row g-3 aling-items-center\">\r\n        <div class=\"col-auto d-block mx-auto\">\r\n          <input\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            placeholder=\"ادخل بريدك الالكتروني\"\r\n            v-model=\"email\"\r\n          />\r\n          <span class=\"error-feedback\" v-if=\"v$.email.$error\">\r\n            البريد الالكتروني مطلوب</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <br />\r\n\r\n      <br />\r\n      <div class=\"row g-3 aling-items-center\">\r\n        <div class=\"col-auto d-block mx-auto\">\r\n          <button type=\"button\" @click=\"sendEmailCode()\" class=\"btn btn-info\">\r\n            ارسل رمز للايميل\r\n          </button>\r\n          &nbsp; &nbsp; &nbsp;\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    \r\n\r\n    <div v-if=\"sent == true\">\r\n         <p style=\"font-size:15px\">تم ارسال بريد الكتروني لكم يحتوي الرمز , اذا لم تجده انظر صنوق الرسائل الغير هامة</p>\r\n            <br/>\r\n            <br/>\r\n      <div class=\"row g-3 aling-items-center\">\r\n        <div class=\"col-auto d-block mx-auto\">\r\n             \r\n            \r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            placeholder=\"ادحل الرمز المرسل للايميل\"\r\n            v-model=\"theEmailCode\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <br />\r\n      <br />\r\n\r\n      <div class=\"row g-3 aling-items-center\">\r\n        <div class=\"col-auto d-block mx-auto\">\r\n          <button type=\"button\" @click=\"checkEmailCode()\" class=\"btn btn-info\">\r\n            تحقق من الرمز\r\n          </button>\r\n          &nbsp; &nbsp; &nbsp;\r\n        </div>\r\n      </div>\r\n    </div>\r\n     \r\n    <br />\r\n     \r\n        <p v-if=\"codeNotCorrect==true\" >رمز التحقق غير صحيح</p>\r\n        \r\n    <div v-if=\"verfied == true\">\r\n        <br />\r\n        <p>تم التحقق من الرمز بنجاح انتقل لاستكمال التسجيل</p>\r\n        <br/>\r\n      <router-link :to=\"{ name: 'Signup', params: { email: email } }\">\r\n        <button class=\"btn btn-info\"> استكمال التسجيل</button>\r\n      </router-link>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport useValidate from \"@vuelidate/core\";\r\nimport { required, email } from \"@vuelidate/validators\";\r\n \r\n\r\nexport default {\r\n  name: \"SignupEmail\",\r\n  components: {\r\n    \r\n  },\r\n  data() {\r\n    return {\r\n      v$: useValidate(),\r\n\r\n      email: \"\",\r\n      emailCode: \"\",\r\n      theEmailCode: \"\",\r\n      sent: false,\r\n      verfied: false,\r\n      emailNotFound:true,\r\n      codeNotCorrect:false\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      email: { required, email },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n   async  sendEmailCode() {\r\n      console.log(\"dfd\");\r\n\r\n      this.v$.$validate();\r\n      if (!this.v$.$error) {\r\n        console.log(\"v\");\r\n\r\n         console.log(\"Form Validated Successfully\");\r\n\r\n        console.log(\"dddd\");\r\n        let result = await axios.get(\r\n          `https://my-app-2-vfjnn.ondigitalocean.app/api/checkEmail/${this.email}`\r\n        );\r\n        //let result = await axios.get('http://localhost:3000/api/user/');\r\n\r\n         \r\n        console.log(\"dddd\");\r\n        console.log(result.data);\r\n        console.log(result.status);\r\n        if (result.status == 200 && result.data.length > 0) {\r\n          \r\n          // console.log(\"No User Found\");\r\n         this.emailNotFound = false;\r\n          \r\n\r\n        } else {\r\n\r\n            this.emailNotFound = true;\r\n          \r\n\r\n          let result = await axios.get(`https://my-app-2-vfjnn.ondigitalocean.app/api/sendemailcode/${this.email}`);\r\n        if (result.status == 200 && result.data.length > 0) {\r\n             \r\n            \r\n          console.log(result.data);\r\n          console.log(result.data[0].otpCode);\r\n          this.emailCode=result.data[0].otpCode;\r\n           console.log(this.emailCode);\r\n\r\n           this.sent = true;\r\n        }\r\n        }\r\n        ///\r\n\r\n         \r\n      }\r\n    },\r\n\r\n    checkEmailCode() {\r\n      console.log(\"aa\");\r\n\r\n      console.log(\"v\");\r\n\r\n       \r\n\r\n      if(this.theEmailCode==this.emailCode)\r\n      {\r\n          console.log(\"استكمل التسجيل\");\r\n           \r\n           this.codeNotCorrect = false;\r\n          this.verfied=true;\r\n      }\r\n      else\r\n      {\r\n          console.log(\"كود التحقق غير صحيح\");\r\n          this.codeNotCorrect = true;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":""}]}